
# Environment detection (in priority order)
environment = "development"
environment = ${?SPARK_ENV}
environment = ${?ENVIRONMENT}
environment = ${?ENV}

# Module detection (set by job or build process)
module = ${?MODULE_NAME}

# Load shared configuration
include file("config/common.conf")

# Load environment-specific configuration
include file("config/environments/"${environment}".conf")

# Load module-specific configuration (if module is specified)
include file("config/modules/"${module}".conf")

# Application metadata (packaged with JAR)
app {
  build-info {
    timestamp = ${?BUILD_TIMESTAMP}
    commit = ${?GIT_COMMIT}
    branch = ${?GIT_BRANCH}
    version = ${?BUILD_VERSION}
  }
}

# Fallback configurations (if external configs fail to load)
spark {
  master = "local[*]"
  app-name = "smartstar-spark-app"

  executor {
    memory = "2g"
    cores = 2
  }

  driver {
    memory = "1g"
  }
}

database {
  host = "localhost"
  port = 5432
  name = "smartstar"
  username = "smartstar_user"
  password = "smartstar_password"
}

storage {
  base-path = "/tmp/smartstar"
}
